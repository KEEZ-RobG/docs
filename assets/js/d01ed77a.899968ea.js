"use strict";(self.webpackChunklukso_docs=self.webpackChunklukso_docs||[]).push([[9858],{3905:(e,t,n)=>{n.d(t,{Zo:()=>d,kt:()=>m});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=a.createContext({}),c=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},d=function(e){var t=c(e.components);return a.createElement(l.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},u=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,l=e.parentName,d=o(e,["components","mdxType","originalType","parentName"]),u=c(n),m=r,v=u["".concat(l,".").concat(m)]||u[m]||p[m]||i;return n?a.createElement(v,s(s({ref:t},d),{},{components:n})):a.createElement(v,s({ref:t},d))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,s=new Array(i);s[0]=u;var o={};for(var l in t)hasOwnProperty.call(t,l)&&(o[l]=t[l]);o.originalType=e,o.mdxType="string"==typeof e?e:r,s[1]=o;for(var c=2;c<i;c++)s[c]=n[c];return a.createElement.apply(null,s)}return a.createElement.apply(null,n)}u.displayName="MDXCreateElement"},1626:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>s,default:()=>p,frontMatter:()=>i,metadata:()=>o,toc:()=>c});var a=n(3117),r=(n(7294),n(3905));const i={sidebar_label:"LSP1 - Universal Receiver",sidebar_position:1},s="LSP1 - Universal Receiver",o={unversionedId:"standards/generic-standards/lsp1-universal-receiver",id:"standards/generic-standards/lsp1-universal-receiver",title:"LSP1 - Universal Receiver",description:"LSP1 - Universal Receiver",source:"@site/docs/standards/generic-standards/lsp1-universal-receiver.md",sourceDirName:"standards/generic-standards",slug:"/standards/generic-standards/lsp1-universal-receiver",permalink:"/standards/generic-standards/lsp1-universal-receiver",draft:!1,editUrl:"https://github.com/lukso-network/docs/tree/main/docs/standards/generic-standards/lsp1-universal-receiver.md",tags:[],version:"current",lastUpdatedAt:1651141176,formattedLastUpdatedAt:"Apr 28, 2022",sidebarPosition:1,frontMatter:{sidebar_label:"LSP1 - Universal Receiver",sidebar_position:1},sidebar:"standardsSidebar",previous:{title:"ERC725",permalink:"/standards/lsp-background/erc725"},next:{title:"LSP2 - ERC725Y JSON Schema",permalink:"/standards/generic-standards/lsp2-json-schema"}},l={},c=[{value:"Introduction",id:"introduction",level:2},{value:"What does this standard represent?",id:"what-does-this-standard-represent",level:2},{value:"Specification",id:"specification",level:3},{value:"Extension",id:"extension",level:2},{value:"References",id:"references",level:2}],d={toc:c};function p(e){let{components:t,...i}=e;return(0,r.kt)("wrapper",(0,a.Z)({},d,i,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"lsp1---universal-receiver"},"LSP1 - Universal Receiver"),(0,r.kt)("admonition",{title:"Standard Document",type:"info"},(0,r.kt)("p",{parentName:"admonition"},(0,r.kt)("a",{parentName:"p",href:"https://github.com/lukso-network/LIPs/blob/main/LSPs/LSP-1-UniversalReceiver.md"},"LSP1 - Universal Receiver"))),(0,r.kt)("h2",{id:"introduction"},"Introduction"),(0,r.kt)("p",null,"There is often the need for smart contracts to ",(0,r.kt)("strong",{parentName:"p"},"be aware of incoming transactions"),", especially when it comes to value transfers."),(0,r.kt)("p",null,"A good example is ERC20 token transfers. When a smart contract receives a token, it has no generic way to be notified about it. One solution to this problem could be to monitor the receiving contract by listening for ERC20 token transfer events."),(0,r.kt)("p",null,"However, this requires using a trusted third party to monitor the contract. Such a method limits smart contracts' autonomy and introduces a single point of failure."),(0,r.kt)("p",null,"One way to solve this problem is by creating a standard function that any smart contract can implement. Wallets or profiles could use this function to notify the user about an incoming asset, information, followers, etc."),(0,r.kt)("h2",{id:"what-does-this-standard-represent"},"What does this standard represent?"),(0,r.kt)("h3",{id:"specification"},"Specification"),(0,r.kt)("admonition",{title:"recommendation",type:"success"},(0,r.kt)("p",{parentName:"admonition"},"Smart contracts implementing the ",(0,r.kt)("inlineCode",{parentName:"p"},"universalReceiver(...)")," function SHOULD ",(0,r.kt)("strong",{parentName:"p"},"register")," the ",(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("a",{parentName:"strong",href:"/standards/smart-contracts/interface-ids"},"LSP1UniversalReceiver InterfaceId")," using ERC165"),". This way, other contracts can be aware that the contract supports the LSP1 standard.")),(0,r.kt)("p",null,"This standard defines a single function named ",(0,r.kt)("inlineCode",{parentName:"p"},"universalReceiver(...)")," that could receive ",(0,r.kt)("strong",{parentName:"p"},"any arbitrary information"),". It takes two parameters:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"bytes32 ",(0,r.kt)("inlineCode",{parentName:"li"},"typeId"),": Hash or Hook of a specific standard."),(0,r.kt)("li",{parentName:"ul"},"bytes ",(0,r.kt)("inlineCode",{parentName:"li"},"data"),": Any arbitrary data.")),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"universalReceiver(...)")," function emits an event with the data passed to it and some additional data. The function can then implement custom logic to make the contract behave differently based on the data received. For instance, the universalReceiver(...) function offers the following possibilities:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Reverting on calls to completely disallow the smart contract from receiving assets, information, etc. \u274c"),(0,r.kt)("li",{parentName:"ul"},"Registering the received assets inside the contract storage (see ",(0,r.kt)("a",{parentName:"li",href:"/standards/universal-profile/lsp5-received-assets"},"LSP5 - Received Assets"),"). \u2795")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"Receiving contracts should consider the ",(0,r.kt)("inlineCode",{parentName:"p"},"typeId")," parameter to ",(0,r.kt)("strong",{parentName:"p"},"decode the data correctly"),".")),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"schema of universal receiver transaction",src:n(736).Z,width:"3021",height:"1323"})),(0,r.kt)("h2",{id:"extension"},"Extension"),(0,r.kt)("admonition",{type:"info"},(0,r.kt)("p",{parentName:"admonition"},"See the ",(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("a",{parentName:"strong",href:"/standards/universal-profile/lsp1-universal-receiver-delegate"},"LSP1-UniversalReceiverDelegate"))," standard for more details.")),(0,r.kt)("p",null,"LSP1-UniversalReceiverDelegate is an ",(0,r.kt)("strong",{parentName:"p"},"optional extension")," to the LSP1-UniversalReceiver Standard. As well as notifying a contract about the incoming and outgoing transactions via an event, it will delegate the ",(0,r.kt)("inlineCode",{parentName:"p"},"universalReceiver(...)")," functionality to an external contract that can ",(0,r.kt)("strong",{parentName:"p"},"handle and react to specific calls")," with its custom logic."),(0,r.kt)("p",null,"The address of the ",(0,r.kt)("strong",{parentName:"p"},"external contract")," MUST be set as a value for the ",(0,r.kt)("strong",{parentName:"p"},"LSP1UniversalReceiverDelegate data key")," shown below to enable the optional extension. This key-value pair inside the ",(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("a",{parentName:"strong",href:"https://github.com/ERC725Alliance/erc725/blob/main/docs/ERC-725.md#erc725y"},"ERC725Y Data key-value store"))," of the contract implementing the ",(0,r.kt)("inlineCode",{parentName:"p"},"universalReceiver(...)")," function will act as a reference, making this external contract upgradeable if required."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "name": "LSP1UniversalReceiverDelegate",\n  "key": "0x0cfc51aec37c55a4d0b1a65c6255c4bf2fbdf6277f3cc0730c45b828b6db8b47",\n  "keyType": "Singleton",\n  "valueType": "address",\n  "valueContent": "Address"\n}\n')),(0,r.kt)("h2",{id:"references"},"References"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://github.com/lukso-network/LIPs/blob/main/LSPs/LSP-1-UniversalReceiver.md"},"LUKSO Standards Proposals: LSP1 - Universal Receiver (Standard Specification, GitHub)"))))}p.isMDXComponent=!0},736:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/ur-transaction-276d04a0b8fc0fbcf8c4372388811f33.jpeg"}}]);